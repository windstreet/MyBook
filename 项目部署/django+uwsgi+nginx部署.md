# django + uwsgi + nginx 部署教程


## 流程原理
1. 首先客户端请求服务资源；
2. `nginx` 作为直接对外的服务接口，接收到客户端发送过来的http请求，会解包、分析；
3. 如果是静态文件请求，就根据 `nginx` 配置的静态文件目录，直接返回请求的资源，
4. 如果是动态的请求，`nginx` 就通过配置文件，将请求传递给 `uWSGI`；`uWSGI` 将接收到的包进行处理，并转发给 `wsgi`；
5. `wsgi` 根据请求调用 `django项目` 的某个文件或函数，处理完后 `django` 将返回值交给 `wsgi`；
6. `wsgi` 将返回值进行打包，转发给 `uWSGI`；
7. `uWSGI` 接收后转发给 `nginx`，`nginx` 最终将返回值返回给客户端(如浏览器)。    

> 注: 不同的组件之间传递信息涉及到数据格式和协议的转换


#### 作用与意义:

1. 第一级的 `nginx` 并不是必须的，`uwsgi` 完全可以完成整个的和浏览器交互的流程；
2. 在 `nginx` 上加上安全性或其他的限制，可以达到保护程序的作用；
3. `uWSGI` 本身是内网接口，开启多个 `work` 和 `processes` 可能也不够用，而 `nginx` 可以代理多台 `uWSGI` 完成 `uWSGI的负载均衡`；
4. `django` 在 `debug=False` 下对静态文件的处理能力不是很好，而用 `nginx` 来处理更加高效。


---


